--mysql with docker
--docker run --name mysql -e MYSQL_ROOT_PASSWORD="mysql" -e MYSQL_USER="leo" -e MYSQL_PASSWORD="mysql" -e MYSQL_DATABASE="todo" -p "3306:3306" -d mysql

--configs on DBeaver

--allowPublicKeyRetrieval = true
--useSSL = false

--TODO APP
CREATE DATABASE TODO;

CREATE TABLE STATUS(
    STATUS_CODE CHAR(1) NOT NULL PRIMARY KEY,
    DESCR VARCHAR(100)
);
INSERT INTO STATUS (STATUS_CODE, DESCR) VALUES ('A', 'ACTIVE');
INSERT INTO STATUS (STATUS_CODE, DESCR) VALUES ('F', 'DONE');
INSERT INTO STATUS (STATUS_CODE, DESCR) VALUES ('D', 'DELETED');
INSERT INTO STATUS (STATUS_CODE, DESCR) VALUES ('U', 'UNFINISHED');

SELECT * FROM STATUS;

CREATE TABLE THINGS_TODO(
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    TITLE VARCHAR(50) NOT NULL,
    SUBTILE VARCHAR (100),
    DT_SCHEDULE DATE NOT NULL,
    TM_SCHEDULE TIME NOT NULL,
    STATUS CHAR(1) NOT NULL,
    DT_CREATED DATETIME
);

INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('WAKE UP', NULL, NOW(), '06:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('WORKOUT', NULL, NOW(), '06:10', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('BREAKFAST', NULL, NOW(), '07:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('STUDY TIME 01', 'FLUTTER', NOW(), '08:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('SPANISH CLASS', NULL, NOW(), '09:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES("WIFE'S BREAKFAST", 'EAGGS WITH TOAST AND ORANGE JUICE', NOW(), '10:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('PREPARE LUNCH', NULL, NOW(), '11:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('LUNCH TIME', 'BROCILIS WITH SALAD', NOW(), '12:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('CLEAN THE HOUSE', NULL, NOW(), '14:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('SQL CLASS', 'CLASS 01', NOW(), '16:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('WALK WITH TEO', NULL, NOW(), '17:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('PREPARE DINNER', 'FRESH SALAD', NOW(), '19:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('DINNER TIME', NULL, NOW(), '20:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('READING TIME', 'HARRY POTTER BOOK', NOW(), '22:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('SLEEP', NULL, NOW(), '23:00', 'A', NOW());

SELECT * FROM THINGS_TODO tt 

SELECT * FROM THINGS_TODO tt 
ORDER BY 4,5 ;

INSERT INTO STATUS (STATUS_CODE, DESCR) VALUES ('U', 'UNFINISHED');

UPDATE STATUS SET DESCR = 'FINISHED' WHERE STATUS_CODE = 'F';

SELECT * FROM STATUS;

UPDATE THINGS_TODO SET STATUS = 'F' WHERE ID = 1;

SELECT * FROM THINGS_TODO WHERE ID = 1;

UPDATE THINGS_TODO SET STATUS = 'F' WHERE ID = 2;
UPDATE THINGS_TODO SET STATUS = 'F' WHERE ID = 3;
UPDATE THINGS_TODO SET STATUS = 'F' WHERE ID = 4;
UPDATE THINGS_TODO SET STATUS = 'U' WHERE ID = 5;
UPDATE THINGS_TODO SET STATUS = 'U' WHERE ID = 6;
UPDATE THINGS_TODO SET STATUS = 'U' WHERE ID = 7;
UPDATE THINGS_TODO SET STATUS = 'D' WHERE ID = 8;
UPDATE THINGS_TODO SET STATUS = 'D' WHERE ID = 9;

SELECT * FROM THINGS_TODO;

SELECT * FROM THINGS_TODO WHERE STATUS = 'A';
SELECT * FROM THINGS_TODO WHERE STATUS = 'D';

SELECT COUNT(*), STATUS FROM THINGS_TODO
GROUP BY STATUS;

--LETS START CREATE YOUR TODO FOR TOMORROW
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('DOCTOR', 'DOUGLAS STREET 58', '2020-08-18', '09:00', 'A', NOW());

SELECT * FROM THINGS_TODO;

--THINGS TODO TODAY
SELECT * FROM THINGS_TODO
WHERE DT_SCHEDULE = '2020-08-17';

-- GROUP BY DATE
SELECT COUNT(*), DT_SCHEDULE
FROM THINGS_TODO
GROUP BY DT_SCHEDULE;

--GROUP BY AND STATUS
SELECT COUNT(*), DT_SCHEDULE, STATUS
FROM THINGS_TODO
GROUP BY DT_SCHEDULE, STATUS;

-- DON'T REMEMBER NAME OF STATUS
SELECT COUNT(*), DT_SCHEDULE, S.DESCR
FROM THINGS_TODO TT
INNER JOIN STATUS S ON (TT.STATUS = S.STATUS_CODE )
GROUP BY DT_SCHEDULE, DESCR;

--SCRIPT
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK01', 'SUBTITLE TASK01', '2020-08-18', '10:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK02', 'SUBTITLE TASK02', '2020-08-19', '10:00', 'D', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK03', 'SUBTITLE TASK03', '2020-08-20', '10:00', 'D', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK04', 'SUBTITLE TASK04', '2020-08-01', '11:00', 'D', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK05', 'SUBTITLE TASK05', '2020-08-02', '11:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK06', 'SUBTITLE TASK06', '2020-08-04', '11:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK07', 'SUBTITLE TASK07', '2020-08-11', '12:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK08', 'SUBTITLE TASK08', '2020-08-28', '12:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK09', 'SUBTITLE TASK09', '2020-08-20', '13:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK10', 'SUBTITLE TASK10', '2020-08-10', '14:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK11', 'SUBTITLE TASK11', '2020-08-11', '14:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK12', 'SUBTITLE TASK12', '2020-08-12', '14:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK13', 'SUBTITLE TASK13', '2020-08-15', '15:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK14', 'SUBTITLE TASK14', '2020-08-18', '15:00', 'F', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK15', 'SUBTITLE TASK15', '2020-08-20', '15:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK15', 'SUBTITLE TASK15', '2020-08-11', '15:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK16', 'SUBTITLE TASK16', '2020-08-04', '16:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK17', 'SUBTITLE TASK17', '2020-08-04', '16:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK18', 'SUBTITLE TASK18', '2020-08-20', '16:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK19', 'SUBTITLE TASK19', '2020-08-25', '16:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK20', 'SUBTITLE TASK20', '2020-08-26', '16:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK21', 'SUBTITLE TASK21', '2020-08-28', '16:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK22', 'SUBTITLE TASK22', '2020-08-30', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK23', 'SUBTITLE TASK23', '2020-08-01', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK24', 'SUBTITLE TASK24', '2020-08-18', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK25', 'SUBTITLE TASK25', '2020-08-13', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK26', 'SUBTITLE TASK26', '2020-08-15', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK27', 'SUBTITLE TASK27', '2020-08-18', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK28', 'SUBTITLE TASK28', '2020-08-12', '22:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK29', 'SUBTITLE TASK29', '2020-08-07', '23:00', 'U', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK30', 'SUBTITLE TASK30', '2020-08-08', '23:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK31', 'SUBTITLE TASK31', '2020-08-05', '09:00', 'A', NOW());
INSERT INTO THINGS_TODO (TITLE, SUBTILE, DT_SCHEDULE, TM_SCHEDULE, STATUS, DT_CREATED) VALUES('TITLE TASK32', 'SUBTITLE TASK32', '2020-08-06', '06:00', 'A', NOW());

--COUNT OF COMPLETED ON THIS MONTH
SELECT * FROM THINGS_TODO
WHERE month(DT_SCHEDULE) = 8;

SELECT COUNT(*) FROM THINGS_TODO
WHERE month(DT_SCHEDULE) = 8
AND STATUS = 'F';

SELECT COUNT(*) FROM THINGS_TODO
WHERE month(DT_SCHEDULE) = 8
AND STATUS = 'U';

-- AUGUST REPORT
SELECT COUNT(*), TT.STATUS_CODE 
FROM THINGS_TODO TT
INNER JOIN STATUS S ON (TT.STATUS = S.STATUS_CODE)
WHERE month(DT_SCHEDULE) = 8
GROUP BY STATUS;


--LIMIT
SELECT * FROM THINGS_TODO
LIMIT 5;

--PAGINATING
SELECT * FROM THINGS_TODO
LIMIT 0, 10;

SELECT * FROM THINGS_TODO
LIMIT 10, 10;

SELECT * FROM THINGS_TODO
LIMIT 20, 10;
